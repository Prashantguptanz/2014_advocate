{% extends "base.html" %} {% block content %}

{% csrf_token %}

<div class="container">
	<form class="form-group" id="trainingoptions" name="trainingoptions" style="width: 38%; float: left">
		<legend style="font-size: 18px">Choose options to create signature file
		</legend>

		<div class="form-group" style="width: 98%; overflow: hidden">

			<div style="float: left; margin-left: 1%">
				<select id="classifiertype" name="classifiertype" required >
				<option value="">Select Classifier</option>
				<option value="NaiveBayes">NaiveBayes</option>
				<option value="C4.5">Decision Trees (C4.5)</option>
				<option value="SVM">Support Vector Machine</option>
				<option value="NN">Neural Network</option>
				</select>
		    </div>

			<div style="float: right; margin-right: 1%">
				{% if attributes %}
				<select name="targetattribute" id="targetattribute" required  >
					<option value="">Select target attribute</option>
					{% for attr in attributes %}
					<option value="{{ attr }}"> {{ attr }}
						{% endfor %}
				</select>
				{% endif %}
			</div>
		</div>

		<div class="form-group" style="margin-left: 1%; margin-right: 1%">
			<legend style="font-size: 18px">Validation options
			</legend>
			<input type="radio" name="validationoption" value="1" required />Use training data
			<br/><br/>
			<input type="radio" name="validationoption" value="2" required />Upload validation data
				<span style="float: right">
					<input type="file" id="validationfile" name="validationfile" accept=".csv,.xls,.tif,.png,.adf" disabled/>
				</span> 
			<br/><br/>
			<input type="radio" name="validationoption" id="CrossValidation" value="3">Cross-validation 
				<span style="float: right"> 
					<label style="font-weight: normal"> Folds &nbsp; &nbsp; </label>
					<input id="fold" name = "fold" disabled="disabled" type="text" size="25" value="10" required />
				</span>
			<br/><br/>
			<input type="radio" name="validationoption" id="PercentageSplit" value="4">Percentage split 
				<span style="float: right">
					<label style="font-weight: normal"> % &nbsp; &nbsp; &nbsp; &nbsp; </label>
					<input id="Percentage" name="Percentage" disabled="disabled" type="text" size="25" value="66" required />
				</span>
			<br/><br/>

			<button id = "createsignaturefile" class="btn btn-default" >
				Submit
			</button>
		</div>
	</form>
	
	<div style="width: 61%; float: right;">
		<legend style="font-size: 18px">
			Signature file details
		</legend>
		<div class="form-group"
		style="height: 400px; border-style: solid; border-width: 1px; overflow: auto; border-color: #E5E5E5; margin-left: 1%; margin-right: 1%">

			{% if classifierName %}
			<table style="width: 100%; margin-top: 5px; margin-left: 5px">
				<tr>
					<td>Correctly classified instances:</td>
					<td>{{ clbp }}</td>
					<td>{{ mean_accuracy }} %</td>
				</tr>
				<tr>
					<td>Incorrectly classified instances:</td>
					<td>{{ mlbp }}</td>
					<td>{{ misclassified_accuracy }} %</td>
				</tr>
				<tr>
					<td>Kappa statistic:</td>
					<td>{{ kp }}</td>
				</tr>
			</table>

			<br />

			<label for="ConfusionMatrix" style="margin-left: 10px">Confusion Matrix:</label>
			<table class="table table-bordered" style="width: auto; margin-left: 20px">
				<tr>
					<th></th>
					{% for i in numerical_classes %}
					<th>{{ i }}</th>
					{% endfor %}
				</tr>
				{% for row in cm %}
				<tr>
					{% for class in numerical_classes%}
					{% ifequal forloop.counter forloop.parentloop.counter %}
					<td><strong>{{ class }}</strong></td>
					{% endifequal %}
					{% endfor %}

					{% for data in row %}
					<td>{{ data }}</td>
					{% endfor %}
					{% for sum in rowsum%}
					{% ifequal forloop.counter forloop.parentloop.counter %}
					<td> {{ sum }} </td>
					{% endifequal %}
					{% endfor %}
				</tr>

				{% endfor %}
				<tr>
					<td></td>
					{% for sum in columnsum %}
					<td>{{ sum }} </td>
					{% endfor %}
					<td> {{ totalsum }}</td>
				</tr>
				{% endif %}
		</div>
	</div>

</div>

{% endblock %}
